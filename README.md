# Проект Recipe Book, «Книга рецептов»

## Описание

«Recipe Book» — сайт, на котором пользователи могут публиковать рецепты, добавлять чужие рецепты в избранное и подписываться на публикации других авторов. Пользователям сайта также доступен сервис «Список покупок». Он позволит создавать список продуктов, которые нужно купить для приготовления выбранных блюд.


Доступны следующие страницы: 

* Главная

Список первых шести рецептов, отсортированных по дате публикации «от новых к старым».

* Страница рецепта

Полное описание рецепта.
У авторизованных пользователей есть возможность добавить рецепт в избранное и список покупок, а также подписаться на автора рецепта.

* Страница пользователя

Полное описание рецепта.
У авторизованных пользователей должна быть возможность добавить рецепт в избранное и список покупок, а также подписаться на автора рецепта.

* Страница подписок

Только у владельца аккаунта должна быть возможность просмотреть свою страницу подписок.
Подписаться на публикации могут только авторизованные пользователи.

* Избранное

Добавлять рецепты в избранное может только авторизованный пользователь.
Сам список избранного может просмотреть только его владелец.

* Список покупок

Работа со списком покупок должна возможна только авторизованным пользователям.
Доступ к своему списку покупок есть только у владельца аккаунта.
Имеется возможность скачать список покупок, сформированный из ингридиентов, добавленных в корзину рецептов. 

* Создание и редактирование рецепта

Пользователь может добавить свой рецепт, указав необходимые ингридиенты, их количество, время приготовления, описание и установив теги.

Сущности проекта:

1. Рецепт

* Автор публикации (пользователь)
* Название
* Картинка
* Текстовое описание
* Ингредиенты
* Тег
* Время приготовления в минутах

2. Тег

* Название
* Цветовой HEX-код
* Slug

3. Ингредиент

* Название
* Количество
* Единицы измерения
______________________________________________________

## Ключевые технологии
* Python
* Django
* Django Rest Framework
* Docker
* Gunicorn
* NGINX

_____________________________________________________

## Установка

### Локально

1. Cклонировать репозитарий.

2. Cоздайте и активируйте виртуальное окружение:

```
python3 -m venv venv && . venv/bin/activate
```

3. Установите все зависимости из файла requirements.txt:

`pip install -r requirements.txt`

4. Установите  **docker**. [Инструкция по установке](https://docs.docker.com/).


5. В головной директории создайте файл .env и заполните его данными по примеру
файла **.example.env**.


6. Соберите контейнеры, выполните миграции, загрузите статику и подготовленную базу с ингредиентами и тегами:

```
sudo docker compose -f docker-compose.yml up --build -d && \
sudo docker compose -f docker-compose.yml exec backend python manage.py makemigrations && \
sudo docker compose -f docker-compose.yml exec backend python manage.py migrate && \
sudo docker compose -f docker-compose.yml exec backend python manage.py collectstatic && \
sudo docker compose -f docker-compose.yml exec backend cp -r /app/collected_static/. /backend_static/static/ && \
sudo docker compose -f docker-compose.yml exec backend python manage.py load_ingredients && \
sudo docker compose -f docker-compose.yml exec backend python manage.py load_tags
```

Создайте СуперПользователя для доступа к панели администратора. 

```
docker-compose exec backend python manage.py createsuperuser
```

8. Сервис будет доступен по ссылке: **http://localhost:8000/**.


9. Полезная информация:
* В папке postman-collection — коллекция API-запросов.
* В папке docs — файлы спецификации API.


### На удаленном сервере

1. Склонировать репозиторий.


2. В репозитории проекта на **github** в **Secrets** создайте переменные окружения для работы:

```
DOCKER_PASSWORD=<пароль учетной записи Docker>
DOCKER_USERNAME=<имя учетной записи Docker>
HOST=<IP адрес сервера>
SSH_KEY=<ваш SSH ключ>
SSH_PASSPHRASE=<пароль>

TELEGRAM_TO=<ID чата, в который придет сообщение>
TELEGRAM_TOKEN=<токен вашего бота>
```

3. Выполните команду `git push`.

7. Сервис готов к использованию.

_____________________________________________________
